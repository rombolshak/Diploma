\chapter{Практическая реализация}
В этой главе описана реализация программ, которые моделируют и визуализируют некоторые из процессов, описанных ранее. В частности, разработаны программа моделирования квантовой части протокола релятивистского распределения ключей и программа моделирования процесса исправления ошибок протоколом Cascade.

\input{chapter3/framework}

\section{Визуализация квантовой части релятивистского протокола распределения ключей}
Программа, визуализирующая процесс квантовой части протокола, была названа Requc (от Relativistic Quantum Cryptography) и в дальнейшем при необходимости будет использоваться именно это название.
Исходя из схемы протокола, в программе имеется две основных модели - модель квантового состояния и модель единичной посылки. 

Диаграмма классов представлена на рисунке \ref{fig:requc_models}
\begin{figure}[h]
  \includegraphics[width=0.9\linewidth]{chapter3/requc_models}
  \caption{Диаграмма классов программы Requc.}
  \label{fig:requc_models}
\end{figure}

Согласно описанному выше шаблону MVVM, все классы, имена которых оканчиваются на \textit{ViewModel}, являются Моделями Представлениями. 
В силу относительной визуальной простоты программы (нет сложной логики интерфейса, множества экранов и т.п.), по факту на протяжении всего жизненного цикла программы используется лишь одна модель представления~--- \mintinline{csharp}|SimpleProtocolViewModel|. Эта модель представления содержит ссылку на коллекцию объектов Модели \mintinline{csharp}|TransmissionItem|, представляющей собой объект посылки в протоколе, и ссылку на экземпляр Модели \mintinline{csharp}|SimpleProtocolAct|, который содержит метод (на схеме не указан) запуска очередной итерации протокола по описанной в пункте \ref{sec:common_description} схеме.

Главный экран программы показан на рисунке \ref{fig:requc_start_state}. В верхней части экрана по центру изображен оптический тракт между Алисой и Бобом с подслушивателем Евой в середине. В нижней части по центру изображена пространственно-временная плоскость. Слева от нее таблица с результатами каждого прохода. Справа вверху управляющие графические элементы, задающие режим моделирования, число повторений и запуск визуализации.
\begin{figure}[h]
  \includegraphics[width=0.9\linewidth]{chapter3/requc_start_state}
  \caption{Начальное состояние программы Requc.}
  \label{fig:requc_start_state}
\end{figure}

Данный экран отрисовывается Представлением \mintinline{csharp}|SimpleProtocolView|. Иерархия Представлений изображена на рисунке \ref{fig:requc_views}. Так как Представления не производят никаких действий над данными, а только отображают их, то жесткими связями, которые можно было бы изобразить на диаграмме классов, они не обладают, так как в принципе не содержат ссылок на экземпляры других Представлений или Модели представлений. Связывание данных происходит во время исполнения программы, и всю заботу об этом на себя берет WPF.
\begin{figure}[h]
  \includegraphics[width=0.9\linewidth]{chapter3/requc_views}
  \caption{Иерархия Представлений программы Requc.}
  \label{fig:requc_views}
\end{figure}




\section{Визуализация протокола исправления ошибок Cascade}